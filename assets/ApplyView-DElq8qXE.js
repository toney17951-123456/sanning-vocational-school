import{_ as J,z as Q,v as W,g as r,n as X,c as V,o as c,b as o,a as l,w as t,r as n,F as G,h as H,q as i,p as M,t as _,u as x,A as K,B as O,y as Y,j as Z}from"./index-BH9qLff-.js";const ee={class:"apply-container"},le={class:"container"},te={class:"option-content"},ae={class:"option-price"},oe={key:0,class:"payment-content"},se={class:"course-price"},ne={class:"payment-methods"},re={key:0,class:"payment-qr"},ue={class:"qr-code"},de={class:"qr-slot"},ie={class:"payment-tip"},pe={class:"dialog-footer"},me={__name:"ApplyView",setup(ce){const b=W(),s=Q({name:"",phone:"",email:"",course_id:b.params.courseId||"",remark:""}),P={name:[{required:!0,message:"请输入您的姓名",trigger:"blur"},{min:2,max:20,message:"姓名长度在 2 到 20 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入您的手机号码",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],course_id:[{required:!0,message:"请选择您要报名的课程",trigger:"change"}]},k=r(null),w=r(!1),C=r([{id:1,name:"Web前端开发",price:3999},{id:2,name:"Python后端开发",price:4999},{id:3,name:"UI/UX设计",price:3999},{id:4,name:"Java开发",price:4999},{id:5,name:"数据分析",price:3599},{id:6,name:"平面设计",price:2999}]),p=r(!1),f=r("wechat"),F=r("https://picsum.photos/300/300?random=100"),v=r(0),U=r(""),I=r(!1),m=r(null),h=()=>{k.value.resetFields()},A=()=>{k.value.validate(u=>{if(u)w.value=!0,setTimeout(()=>{m.value=C.value.find(e=>e.id===s.course_id),m.value&&(p.value=!0,E()),w.value=!1,ElMessage.success("报名信息提交成功，请进行支付")},1500);else return console.log("表单验证失败"),!1})},E=()=>{v.value=0,U.value="";const u=setInterval(()=>{v.value+=10,v.value>=100&&(clearInterval(u),U.value="success",setTimeout(()=>{ElMessage.success("支付成功！"),p.value=!1,h()},1e3))},500)},N=()=>{I.value=!0,setTimeout(()=>{I.value=!1,ElMessage.success("支付请求已提交，请等待支付结果")},1500)};return X(()=>{if(b.params.courseId){const u=parseInt(b.params.courseId);s.course_id=u}}),(u,e)=>{const g=n("el-input"),d=n("el-form-item"),T=n("el-option"),R=n("el-select"),y=n("el-button"),L=n("el-form"),S=n("el-card"),q=n("el-icon"),B=n("el-radio-button"),$=n("el-radio-group"),j=n("el-image"),z=n("el-progress"),D=n("el-dialog");return c(),V("div",ee,[o("div",le,[e[10]||(e[10]=o("h2",null,"在线报名",-1)),e[11]||(e[11]=o("p",{class:"apply-intro"},"请填写以下信息进行报名，我们将尽快与您联系。",-1)),l(S,{class:"apply-card"},{default:t(()=>[l(L,{model:s,rules:P,ref_key:"applyFormRef",ref:k,"label-width":"120px",class:"apply-form"},{default:t(()=>[l(d,{label:"姓名",prop:"name"},{default:t(()=>[l(g,{modelValue:s.name,"onUpdate:modelValue":e[0]||(e[0]=a=>s.name=a),placeholder:"请输入您的姓名"},null,8,["modelValue"])]),_:1}),l(d,{label:"手机号码",prop:"phone"},{default:t(()=>[l(g,{modelValue:s.phone,"onUpdate:modelValue":e[1]||(e[1]=a=>s.phone=a),placeholder:"请输入您的手机号码"},null,8,["modelValue"])]),_:1}),l(d,{label:"电子邮箱",prop:"email"},{default:t(()=>[l(g,{modelValue:s.email,"onUpdate:modelValue":e[2]||(e[2]=a=>s.email=a),placeholder:"请输入您的电子邮箱"},null,8,["modelValue"])]),_:1}),l(d,{label:"选择课程",prop:"course_id"},{default:t(()=>[l(R,{modelValue:s.course_id,"onUpdate:modelValue":e[3]||(e[3]=a=>s.course_id=a),placeholder:"请选择您要报名的课程"},{default:t(()=>[(c(!0),V(G,null,H(C.value,a=>(c(),Z(T,{key:a.id,label:a.name,value:a.id},{default:t(()=>[o("div",te,[o("span",null,_(a.name),1),o("span",ae,"¥"+_(a.price),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"备注信息"},{default:t(()=>[l(g,{modelValue:s.remark,"onUpdate:modelValue":e[4]||(e[4]=a=>s.remark=a),type:"textarea",rows:4,placeholder:"请输入备注信息（可选）"},null,8,["modelValue"])]),_:1}),l(d,null,{default:t(()=>[l(y,{type:"primary",onClick:A,loading:w.value},{default:t(()=>[...e[8]||(e[8]=[i(" 提交报名 ",-1)])]),_:1},8,["loading"]),l(y,{onClick:h},{default:t(()=>[...e[9]||(e[9]=[i("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),l(D,{modelValue:p.value,"onUpdate:modelValue":e[7]||(e[7]=a=>p.value=a),title:"支付确认",width:"50%",center:""},{footer:t(()=>[o("span",pe,[l(y,{onClick:e[6]||(e[6]=a=>p.value=!1)},{default:t(()=>[...e[16]||(e[16]=[i("取消",-1)])]),_:1}),l(y,{type:"primary",onClick:N,loading:I.value},{default:t(()=>[...e[17]||(e[17]=[i(" 确认支付 ",-1)])]),_:1},8,["loading"])])]),default:t(()=>[m.value?(c(),V("div",oe,[o("h3",null,_(m.value.name),1),o("p",se,"¥"+_(m.value.price),1),o("div",ne,[e[14]||(e[14]=o("h4",null,"选择支付方式",-1)),l($,{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=a=>f.value=a)},{default:t(()=>[l(B,{label:"wechat"},{default:t(()=>[l(q,null,{default:t(()=>[l(x(K))]),_:1}),e[12]||(e[12]=i(" 微信支付 ",-1))]),_:1}),l(B,{label:"alipay"},{default:t(()=>[l(q,null,{default:t(()=>[l(x(O))]),_:1}),e[13]||(e[13]=i(" 支付宝 ",-1))]),_:1})]),_:1},8,["modelValue"])]),f.value?(c(),V("div",re,[e[15]||(e[15]=o("h4",null,"扫描二维码支付",-1)),o("div",ue,[l(j,{src:F.value,fit:"cover","preview-src-list":[F.value]},{error:t(()=>[o("div",de,[l(q,null,{default:t(()=>[l(x(Y))]),_:1})])]),_:1},8,["src","preview-src-list"])]),o("p",ie,"请使用"+_(f.value==="wechat"?"微信":"支付宝")+"扫描上方二维码进行支付",1),l(z,{percentage:v.value,status:U.value},null,8,["percentage","status"])])):M("",!0)])):M("",!0)]),_:1},8,["modelValue"])])}}},fe=J(me,[["__scopeId","data-v-c0364ac6"]]);export{fe as default};
